---
layout: default
title: "Weather Agent Example"
description: "Complete weather monitoring agent implementation using AMCP"
permalink: /examples/weather-agent/
---

<div class="example-container">
  <div class="container">
    <header class="example-header">
      <h1>üå§Ô∏è Weather Agent Example</h1>
      <p class="example-subtitle">Real-time weather monitoring with distributed agent coordination</p>
      <div class="example-meta">
        <span class="complexity">Intermediate</span>
        <span class="tech-stack">Java + Kafka</span>
        <span class="use-case">IoT Monitoring</span>
      </div>
    </header>

    <div class="example-content">
      <div class="example-overview">
        <h2>üìã Overview</h2>
        <p>This example demonstrates a distributed weather monitoring system using AMCP agents. Multiple weather stations collect data, process it through specialized agents, and coordinate responses to weather events.</p>
        
        <div class="architecture-preview">
          <h3>System Architecture</h3>
          <div class="arch-diagram">
            <div class="agent-node">Weather Collector</div>
            <div class="flow-arrow">‚Üí</div>
            <div class="agent-node">Data Processor</div>
            <div class="flow-arrow">‚Üí</div>
            <div class="agent-node">Alert Manager</div>
            <div class="flow-arrow">‚Üí</div>
            <div class="agent-node">Notification Service</div>
          </div>
        </div>
      </div>

      <div class="example-features">
        <h2>‚ú® Key Features</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">üì°</div>
            <h3>Real-time Data Collection</h3>
            <p>Agents collect weather data from multiple sources and sensors</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üîÑ</div>
            <h3>Event-Driven Processing</h3>
            <p>Asynchronous processing of weather updates and alerts</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üö®</div>
            <h3>Smart Alerting</h3>
            <p>Intelligent threshold-based weather alert system</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <h3>Data Aggregation</h3>
            <p>Statistical analysis and trend detection</p>
          </div>
        </div>
      </div>

      <div class="code-example">
        <h2>üíª Implementation</h2>
        
        <div class="code-section">
          <h3>Weather Collector Agent</h3>
          <pre><code>@Agent("weather-collector")
public class WeatherCollectorAgent extends BaseAgent {
    
    private final WeatherAPI weatherAPI;
    private final ScheduledExecutorService scheduler;
    
    @Override
    public void onActivation() {
        // Subscribe to collection requests
        subscribe("weather.collect.*");
        
        // Start periodic collection
        scheduler.scheduleAtFixedRate(
            this::collectWeatherData, 0, 5, TimeUnit.MINUTES);
    }
    
    @EventHandler
    @Subscribe("weather.collect.request")
    public void handleCollectionRequest(Event event) {
        String location = event.getPayload(String.class);
        collectWeatherForLocation(location);
    }
    
    private void collectWeatherData() {
        List&lt;String&gt; locations = getMonitoredLocations();
        
        locations.parallelStream().forEach(location -> {
            try {
                WeatherData data = weatherAPI.getCurrentWeather(location);
                
                Event weatherEvent = Event.builder()
                    .topic("weather.data.raw." + location)
                    .payload(data)
                    .timestamp(Instant.now())
                    .build();
                    
                publish(weatherEvent);
                
            } catch (Exception e) {
                publishError("weather.error.collection", location, e);
            }
        });
    }
}</code></pre>
        </div>

        <div class="code-section">
          <h3>Weather Processor Agent</h3>
          <pre><code>@Agent("weather-processor")
public class WeatherProcessorAgent extends BaseAgent {
    
    private final Map&lt;String, WeatherHistory&gt; locationHistory = new ConcurrentHashMap&lt;&gt;();
    
    @Override
    public void onActivation() {
        subscribe("weather.data.raw.*");
        subscribe("weather.analysis.request.*");
    }
    
    @EventHandler
    @Subscribe("weather.data.raw.*")
    public void processWeatherData(Event event) {
        String location = extractLocationFromTopic(event.getTopic());
        WeatherData rawData = event.getPayload(WeatherData.class);
        
        // Process and enrich data
        ProcessedWeatherData processed = enrichWeatherData(rawData);
        
        // Update history
        updateLocationHistory(location, processed);
        
        // Check for alerts
        List&lt;WeatherAlert&gt; alerts = checkAlertConditions(location, processed);
        
        // Publish processed data
        publish(Event.builder()
            .topic("weather.data.processed." + location)
            .payload(processed)
            .build());
            
        // Publish alerts if any
        alerts.forEach(alert -> 
            publish(Event.builder()
                .topic("weather.alert." + alert.getSeverity())
                .payload(alert)
                .build())
        );
    }
    
    private ProcessedWeatherData enrichWeatherData(WeatherData raw) {
        return ProcessedWeatherData.builder()
            .from(raw)
            .heatIndex(calculateHeatIndex(raw))
            .windChill(calculateWindChill(raw))
            .dewPoint(calculateDewPoint(raw))
            .trend(calculateTrend(raw))
            .build();
    }
    
    private List&lt;WeatherAlert&gt; checkAlertConditions(String location, ProcessedWeatherData data) {
        List&lt;WeatherAlert&gt; alerts = new ArrayList&lt;&gt;();
        
        // Temperature alerts
        if (data.getTemperature() > 35.0) {
            alerts.add(WeatherAlert.heatWarning(location, data.getTemperature()));
        }
        
        // Wind alerts
        if (data.getWindSpeed() > 50.0) {
            alerts.add(WeatherAlert.windWarning(location, data.getWindSpeed()));
        }
        
        // Precipitation alerts
        if (data.getPrecipitation() > 25.0) {
            alerts.add(WeatherAlert.rainWarning(location, data.getPrecipitation()));
        }
        
        return alerts;
    }
}</code></pre>
        </div>

        <div class="code-section">
          <h3>Alert Manager Agent</h3>
          <pre><code>@Agent("alert-manager")
public class AlertManagerAgent extends BaseAgent {
    
    private final AlertRepository alertRepository;
    private final NotificationService notificationService;
    
    @Override
    public void onActivation() {
        subscribe("weather.alert.*");
        subscribe("alert.acknowledge.*");
    }
    
    @EventHandler
    @Subscribe("weather.alert.*")
    public void handleWeatherAlert(Event event) {
        WeatherAlert alert = event.getPayload(WeatherAlert.class);
        String severity = extractSeverityFromTopic(event.getTopic());
        
        // Store alert
        alertRepository.save(alert);
        
        // Determine notification strategy based on severity
        NotificationStrategy strategy = getNotificationStrategy(severity);
        
        // Send notifications
        strategy.notify(alert);
        
        // Publish alert event for other systems
        publish(Event.builder()
            .topic("system.alert.weather")
            .payload(AlertNotification.from(alert))
            .priority(getPriority(severity))
            .build());
    }
    
    @EventHandler
    @Subscribe("alert.acknowledge.*")
    public void handleAlertAcknowledgment(Event event) {
        String alertId = event.getPayload(String.class);
        
        alertRepository.acknowledge(alertId, event.getSender());
        
        publish(Event.builder()
            .topic("alert.status.acknowledged")
            .payload(Map.of("alertId", alertId, "acknowledgedBy", event.getSender()))
            .build());
    }
    
    private NotificationStrategy getNotificationStrategy(String severity) {
        switch (severity.toLowerCase()) {
            case "critical":
                return new ImmediateNotificationStrategy(
                    List.of(EmailNotifier.class, SMSNotifier.class, PushNotifier.class));
            case "high":
                return new UrgentNotificationStrategy(
                    List.of(EmailNotifier.class, PushNotifier.class));
            case "medium":
                return new StandardNotificationStrategy(
                    List.of(EmailNotifier.class));
            default:
                return new LogOnlyNotificationStrategy();
        }
    }
}</code></pre>
        </div>
      </div>

      <div class="running-example">
        <h2>üöÄ Running the Example</h2>
        
        <div class="setup-steps">
          <div class="step">
            <h3>1. Prerequisites</h3>
            <ul>
              <li>Java 11+ installed</li>
              <li>Apache Kafka running</li>
              <li>Weather API key (OpenWeatherMap)</li>
            </ul>
          </div>
          
          <div class="step">
            <h3>2. Configuration</h3>
            <pre><code># application.properties
amcp.broker.url=kafka://localhost:9092
weather.api.key=your_api_key_here
weather.locations=london,paris,tokyo,newyork
weather.collection.interval=300000</code></pre>
          </div>
          
          <div class="step">
            <h3>3. Start the System</h3>
            <pre><code>mvn spring-boot:run -Dspring-boot.run.main-class=com.example.WeatherSystemApp</code></pre>
          </div>
          
          <div class="step">
            <h3>4. Monitor Events</h3>
            <pre><code># Watch weather data
kafka-console-consumer --topic weather.data.processed.london

# Watch alerts
kafka-console-consumer --topic weather.alert.high</code></pre>
          </div>
        </div>
      </div>

      <div class="example-results">
        <h2>üìä Expected Results</h2>
        <div class="results-grid">
          <div class="result-card">
            <h3>Data Collection</h3>
            <p>Weather data collected every 5 minutes from configured locations</p>
            <div class="metric">~288 data points/day per location</div>
          </div>
          <div class="result-card">
            <h3>Processing Speed</h3>
            <p>Sub-second processing of weather data and alert generation</p>
            <div class="metric">&lt;500ms average latency</div>
          </div>
          <div class="result-card">
            <h3>Alert Accuracy</h3>
            <p>Intelligent threshold-based alerting with minimal false positives</p>
            <div class="metric">95%+ accuracy rate</div>
          </div>
        </div>
      </div>

      <div class="example-footer">
        <div class="download-section">
          <h3>üì• Get the Code</h3>
          <p>Download the complete weather agent example with all source code and documentation.</p>
          <div class="download-actions">
            <a href="https://github.com/agentmeshcommunicationprotocol/examples/tree/main/weather-agent" class="btn btn-primary">
              <svg class="icon" viewBox="0 0 24 24" width="16" height="16">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
              View on GitHub
            </a>
            <a href="/examples/live-demo/" class="btn btn-outline">Try Live Demo</a>
          </div>
        </div>

        <div class="related-examples">
          <h3>üîó Related Examples</h3>
          <div class="related-links">
            <a href="/examples/stock-agent/">Stock Trading Agent</a>
            <a href="/examples/travel-agent/">Travel Planning Agent</a>
            <a href="/examples/orchestration/">Agent Orchestration</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.example-container {
  font-family: var(--font-family-sans);
  background: #f8f9fa;
  min-height: 100vh;
  padding: 40px 0;
}

.example-header {
  text-align: center;
  margin-bottom: 50px;
}

.example-header h1 {
  font-size: 2.5rem;
  color: #333;
  margin-bottom: 15px;
}

.example-subtitle {
  font-size: 1.2rem;
  color: #666;
  margin-bottom: 20px;
}

.example-meta {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.example-meta span {
  padding: 6px 15px;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 500;
  color: white;
}

.complexity {
  background: #FF9800;
}

.tech-stack {
  background: #1a73e8;
}

.use-case {
  background: #4CAF50;
}

.example-content {
  max-width: 1200px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  padding: 40px;
}

.example-overview {
  margin-bottom: 50px;
}

.example-overview h2 {
  font-size: 1.8rem;
  color: #333;
  margin-bottom: 20px;
}

.architecture-preview {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 8px;
  margin-top: 25px;
}

.arch-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 20px;
}

.agent-node {
  background: #1a73e8;
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: 500;
  min-width: 120px;
  text-align: center;
}

.flow-arrow {
  font-size: 1.5rem;
  color: #666;
  font-weight: bold;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-top: 25px;
}

.feature-card {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 12px;
  text-align: center;
  transition: transform 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-5px);
}

.feature-icon {
  font-size: 2.5rem;
  margin-bottom: 15px;
}

.feature-card h3 {
  margin-bottom: 15px;
  color: #333;
}

.code-example {
  margin: 50px 0;
}

.code-example h2 {
  font-size: 1.8rem;
  color: #333;
  margin-bottom: 30px;
}

.code-section {
  margin-bottom: 30px;
}

.code-section h3 {
  margin-bottom: 15px;
  color: #333;
  font-size: 1.2rem;
}

pre {
  background: #1e1e1e;
  color: #e6e6e6;
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
  font-family: var(--font-family-mono);
  font-size: 0.9rem;
  line-height: 1.4;
}

.setup-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px;
  margin-top: 25px;
}

.step {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 8px;
  border-left: 4px solid #1a73e8;
}

.step h3 {
  margin-bottom: 15px;
  color: #333;
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 25px;
  margin-top: 25px;
}

.result-card {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 8px;
  text-align: center;
  border-top: 4px solid #4CAF50;
}

.result-card h3 {
  margin-bottom: 15px;
  color: #333;
}

.metric {
  font-size: 1.2rem;
  font-weight: 600;
  color: #4CAF50;
  margin-top: 10px;
}

.example-footer {
  margin-top: 50px;
  padding-top: 30px;
  border-top: 2px solid #e9ecef;
}

.download-section {
  text-align: center;
  margin-bottom: 40px;
}

.download-section h3 {
  margin-bottom: 15px;
  color: #333;
}

.download-actions {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 20px;
}

.related-examples {
  text-align: center;
}

.related-examples h3 {
  margin-bottom: 20px;
  color: #333;
}

.related-links {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.related-links a {
  color: #1a73e8;
  text-decoration: none;
  padding: 8px 16px;
  border: 1px solid #1a73e8;
  border-radius: 6px;
  transition: all 0.3s ease;
}

.related-links a:hover {
  background: #1a73e8;
  color: white;
}

.icon {
  fill: currentColor;
  margin-right: 8px;
}

@media (max-width: 768px) {
  .example-content {
    padding: 20px;
  }
  
  .example-meta {
    flex-direction: column;
    align-items: center;
  }
  
  .arch-diagram {
    flex-direction: column;
  }
  
  .flow-arrow {
    transform: rotate(90deg);
  }
  
  .download-actions,
  .related-links {
    flex-direction: column;
    align-items: center;
  }
}
</style>
